# coding: utf8
import socket


def detect(ip, port):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.settimeout(5)
    try:
        sock.connect(ip, int(port))
    except socket.timeout:
        return False, {'msg': 'connection timeout.'}

